local ID = game.PlaceId
local baseURL = "https://raw.githubusercontent.com/Zayn31214/name/refs/heads/main/"
local Players = game:GetService("Players")
local plr = Players.LocalPlayer

function GetGame()
    if ID == 73956553001240 or ID == 134314141048307 or ID == 109684591839194 then
        return "HaikyuLegends.lua"
    elseif ID == 126130304767531 then
        return "MallDrifters.lua"
    elseif ID == 115815718131154 then
        return "Kuroko.lua"
    elseif ID == 86789627188240 then
        return "HaikyuLegendsAfk.lua"
    elseif ID == 18668065416 or ID == 92517437168342 or ID == 82577947590704 or ID == 99999183305180 or ID == 115110570222234 or ID == 140149476595556 then
        return "BLR.lua"
    elseif ID == 99995671928896 or ID == 10290054819 then
        return "Rune.lua"
    else
        print("Game is not supported.")
        return nil
    end
end

local gameScript = GetGame()

if gameScript then
    loadstring(game:HttpGet(baseURL .. gameScript))()
end

for _, v in next, getconnections(plr.Idled) do
    v:Disable()
end

local VirtualUser = game:GetService("VirtualUser")
local status = getgenv().afk_toggle
if status == nil then
    getgenv().afk_toggle = false
end

if not plr then
    error("Failed to get LocalPlayer reference")
end

plr.Idled:Connect(function()
    if not getgenv().afk_toggle then return end
    pcall(function()
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
    end)
end)

task.wait(2)
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local LocalPlayer = Players.LocalPlayer
local TargetGameId = 115110570222234

local function waitForYenLabel()
    while true do
        yenLabel = LocalPlayer:FindFirstChild("PlayerGui")
            and LocalPlayer.PlayerGui:FindFirstChild("HUD")
            and LocalPlayer.PlayerGui.HUD:FindFirstChild("Top")
            and LocalPlayer.PlayerGui.HUD.Top:FindFirstChild("Currencies")
            and LocalPlayer.PlayerGui.HUD.Top.Currencies:FindFirstChild("Yen")
            and LocalPlayer.PlayerGui.HUD.Top.Currencies.Yen:FindFirstChild("Amount")

        if yenLabel and yenLabel:IsA("TextLabel") then break end
        task.wait(1)
    end
end
waitForYenLabel()

local function getYenAmount()
    local yenText = yenLabel.Text:gsub("[^%d]", "")
    return tonumber(yenText)
end

local function safeTeleport()
    local success, err = pcall(function()
        TeleportService:Teleport(TargetGameId, LocalPlayer)
    end)
    if not success then
    end
end

local initialYen = getYenAmount()
if initialYen and initialYen == 100 then
    safeTeleport()
end

task.spawn(function()
    local attempts = 0
    while attempts < 5 do
        local yen = getYenAmount()
        if yen and yen == 100 then
            safeTeleport()
            break
        end
        attempts = attempts + 1
        task.wait(1)
    end
end)

